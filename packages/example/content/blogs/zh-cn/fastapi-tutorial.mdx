---
title: 'FastAPIï¼šPythonçš„é«˜æ€§èƒ½Webæ¡†æ¶å…¥é—¨'
date: 2025-03-22
excerpt: 'å¿«é€Ÿä¸Šæ‰‹Pythonçš„ç°ä»£Webæ¡†æ¶FastAPIï¼Œäº†è§£å…¶é«˜æ€§èƒ½ç‰¹æ€§ã€ä¾èµ–æ³¨å…¥ç³»ç»Ÿå’Œè‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£çš„èƒ½åŠ›ã€‚'
authors:
  - name: Nookery
    picture: https://avatars.githubusercontent.com/u/5194193?s=200
    url: https://github.com/nookery
tags:
  - Python
  - Webå¼€å‘
  - FastAPI
  - APIå¼€å‘
---

åœ¨è¿™ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢FastAPIâ€”â€”ä¸€ä¸ªç°ä»£ã€å¿«é€Ÿã€é«˜æ€§èƒ½çš„Python Webæ¡†æ¶ï¼Œä¸“ä¸ºAPIå¼€å‘è€Œè®¾è®¡ã€‚å³ä½¿ä½ æ˜¯Webå¼€å‘æ–°æ‰‹ï¼Œä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹å¹¶æ„å»ºé«˜æ•ˆçš„APIæœåŠ¡ã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹©FastAPIï¼Ÿ

FastAPIå…·æœ‰è®¸å¤šä»¤äººå°è±¡æ·±åˆ»çš„ç‰¹æ€§ï¼Œä½¿å…¶æˆä¸ºPythonå¼€å‘è€…çš„é¦–é€‰å·¥å…·ï¼š

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
  <div class="bg-blue-50 p-4 rounded-lg">
    <h3 class="text-lg font-bold">ğŸš€ é«˜æ€§èƒ½</h3>
    <p>æ€§èƒ½ä¸NodeJSå’ŒGoç›¸å½“ï¼Œæ˜¯Pythonæœ€å¿«çš„Webæ¡†æ¶ä¹‹ä¸€</p>
  </div>
  <div class="bg-green-50 p-4 rounded-lg">
    <h3 class="text-lg font-bold">ğŸ“ è‡ªåŠ¨æ–‡æ¡£</h3>
    <p>è‡ªåŠ¨ç”Ÿæˆäº¤äº’å¼APIæ–‡æ¡£ï¼Œæ”¯æŒSwagger UIå’ŒReDoc</p>
  </div>
  <div class="bg-yellow-50 p-4 rounded-lg">
    <h3 class="text-lg font-bold">âœ… ç±»å‹æç¤º</h3>
    <p>åŸºäºPythonç±»å‹æç¤ºçš„æ•°æ®æ ¡éªŒå’Œåºåˆ—åŒ–</p>
  </div>
  <div class="bg-purple-50 p-4 rounded-lg">
    <h3 class="text-lg font-bold">ğŸ” æ˜“äºå­¦ä¹ </h3>
    <p>ç®€æ´ç›´è§‚çš„APIè®¾è®¡ï¼Œæ˜“äºä¸Šæ‰‹å’Œä½¿ç”¨</p>
  </div>
</div>

## ç¯å¢ƒå‡†å¤‡

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…FastAPIå’ŒASGIæœåŠ¡å™¨Uvicornï¼š

```bash
pip install fastapi uvicorn
```

## ç¬¬ä¸€ä¸ªFastAPIåº”ç”¨

åˆ›å»ºä¸€ä¸ªåä¸º`main.py`çš„æ–‡ä»¶ï¼Œç¼–å†™ä»¥ä¸‹å†…å®¹ï¼š

```python
from fastapi import FastAPI

# åˆ›å»ºFastAPIå®ä¾‹
app = FastAPI()

# å®šä¹‰æ ¹è·¯ç”±
@app.get("/")
def read_root():
    return {"message": "Hello World"}

# å¸¦å‚æ•°çš„è·¯ç”±
@app.get("/items/{item_id}")
def read_item(item_id: int, q: str = None):
    return {"item_id": item_id, "q": q}
```

è¿è¡Œåº”ç”¨ï¼š

```bash
uvicorn main:app --reload
```

ç°åœ¨ï¼Œè®¿é—® http://127.0.0.1:8000 å°±èƒ½çœ‹åˆ°APIè¿”å›çš„JSONå“åº”äº†ï¼

<div class="bg-gray-100 p-4 rounded-lg my-4">
  <p class="font-semibold">ğŸ’¡ æç¤º</p>
  <p>--reload å‚æ•°ä½¿æœåŠ¡å™¨åœ¨ä»£ç å˜æ›´æ—¶è‡ªåŠ¨é‡å¯ï¼Œéå¸¸é€‚åˆå¼€å‘é˜¶æ®µä½¿ç”¨</p>
</div>

## è¯·æ±‚ä½“å’Œæ•°æ®æ¨¡å‹

FastAPIä½¿ç”¨Pydanticåº“è¿›è¡Œæ•°æ®éªŒè¯ã€‚é€šè¿‡å®šä¹‰æ•°æ®æ¨¡å‹ï¼Œå¯ä»¥è½»æ¾å¤„ç†è¯·æ±‚ä½“ï¼š

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

# å®šä¹‰æ•°æ®æ¨¡å‹
class Item(BaseModel):
    name: str
    price: float
    is_offer: bool = None

@app.post("/items/")
def create_item(item: Item):
    return item
```

è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ª`Item`æ¨¡å‹ï¼Œå½“å®¢æˆ·ç«¯å‘é€POSTè¯·æ±‚æ—¶ï¼ŒFastAPIä¼šè‡ªåŠ¨ï¼š
- è§£æJSONè¯·æ±‚ä½“
- éªŒè¯æ•°æ®ç±»å‹
- æä¾›å®Œæ•´çš„ç¼–è¾‘å™¨æ”¯æŒå’Œé”™è¯¯æç¤º

## å‚æ•°éªŒè¯

FastAPIæä¾›äº†ä¸°å¯Œçš„éªŒè¯åŠŸèƒ½ï¼Œç¡®ä¿è¾“å…¥æ•°æ®ç¬¦åˆé¢„æœŸï¼š

```python
from fastapi import FastAPI, Path, Query

app = FastAPI()

@app.get("/items/{item_id}")
def read_item(
    item_id: int = Path(..., title="The ID of the item", ge=1),
    q: str = Query(None, max_length=50)
):
    return {"item_id": item_id, "q": q}
```

ä¸Šé¢çš„ä»£ç å®ç°äº†ï¼š
- `item_id` å¿…é¡»å¤§äºç­‰äº1
- æŸ¥è¯¢å‚æ•° `q` çš„æœ€å¤§é•¿åº¦ä¸º50ä¸ªå­—ç¬¦

<div class="flex p-4 mb-4 border border-blue-200 rounded bg-blue-50">
  <div class="mr-4 text-blue-500">
    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>
  </div>
  <div>
    <p class="font-medium">FastAPIä¼šè‡ªåŠ¨ç”Ÿæˆé”™è¯¯å“åº”</p>
    <p>å½“ç”¨æˆ·æä¾›æ— æ•ˆæ•°æ®æ—¶ï¼Œä¼šè¿”å›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼ŒåŒ…æ‹¬é”™è¯¯ä½ç½®å’ŒåŸå› ã€‚</p>
  </div>
</div>

## ä¾èµ–æ³¨å…¥ç³»ç»Ÿ

FastAPIçš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿä½¿ä»£ç ç»„ç»‡æ›´åŠ çµæ´»ï¼š

```python
from fastapi import FastAPI, Depends, HTTPException

app = FastAPI()

def common_parameters(q: str = None, skip: int = 0, limit: int = 100):
    return {"q": q, "skip": skip, "limit": limit}

@app.get("/items/")
def read_items(commons: dict = Depends(common_parameters)):
    return {"commons": commons}

@app.get("/users/")
def read_users(commons: dict = Depends(common_parameters)):
    return {"commons": commons}
```

è¿™æ ·å°±èƒ½åœ¨å¤šä¸ªè·¯å¾„æ“ä½œä¹‹é—´å…±äº«ä»£ç ï¼ŒåŒæ—¶ä¿æŒä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

## è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£

FastAPIæœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯è‡ªåŠ¨ç”Ÿæˆäº¤äº’å¼APIæ–‡æ¡£ï¼š

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
  <div class="border rounded p-4">
    <h3 class="text-lg font-bold mb-2">Swagger UI</h3>
    <p class="mb-2">è®¿é—® <code>/docs</code> è·¯å¾„å³å¯è·å¾—åŸºäºSwagger UIçš„äº¤äº’å¼æ–‡æ¡£</p>
  </div>
  <div class="border rounded p-4">
    <h3 class="text-lg font-bold mb-2">ReDoc</h3>
    <p class="mb-2">è®¿é—® <code>/redoc</code> è·¯å¾„è·å¾—åŸºäºReDocçš„å¦ä¸€ç§é£æ ¼æ–‡æ¡£</p>
  </div>
</div>

è¿™äº›æ–‡æ¡£ä¸ä»…å¯ä»¥æŸ¥çœ‹APIè§„èŒƒï¼Œè¿˜å¯ä»¥ç›´æ¥åœ¨é¡µé¢ä¸Šæµ‹è¯•APIè°ƒç”¨ï¼

## å®ç”¨ç¤ºä¾‹ï¼šæ„å»ºå¾…åŠäº‹é¡¹API

ä¸‹é¢æ˜¯ä¸€ä¸ªå®ç”¨çš„å¾…åŠäº‹é¡¹APIç¤ºä¾‹ï¼š

```python
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel
from typing import List, Optional
from uuid import uuid4, UUID

app = FastAPI(title="å¾…åŠäº‹é¡¹API")

# æ•°æ®æ¨¡å‹
class TodoCreate(BaseModel):
    title: str
    description: Optional[str] = None
    completed: bool = False

class Todo(TodoCreate):
    id: UUID

# å†…å­˜å­˜å‚¨
todos = []

@app.post("/todos/", response_model=Todo)
def create_todo(todo: TodoCreate):
    new_todo = Todo(id=uuid4(), **todo.dict())
    todos.append(new_todo)
    return new_todo

@app.get("/todos/", response_model=List[Todo])
def read_todos(skip: int = 0, limit: int = 10):
    return todos[skip : skip + limit]

@app.get("/todos/{todo_id}", response_model=Todo)
def read_todo(todo_id: UUID):
    for todo in todos:
        if todo.id == todo_id:
            return todo
    raise HTTPException(status_code=404, detail="Todo not found")

@app.put("/todos/{todo_id}", response_model=Todo)
def update_todo(todo_id: UUID, todo: TodoCreate):
    for i, saved_todo in enumerate(todos):
        if saved_todo.id == todo_id:
            updated_todo = Todo(id=todo_id, **todo.dict())
            todos[i] = updated_todo
            return updated_todo
    raise HTTPException(status_code=404, detail="Todo not found")

@app.delete("/todos/{todo_id}")
def delete_todo(todo_id: UUID):
    for i, todo in enumerate(todos):
        if todo.id == todo_id:
            del todos[i]
            return {"detail": "Todo deleted"}
    raise HTTPException(status_code=404, detail="Todo not found")
```

## æ€»ç»“

FastAPIæ˜¯ä¸€ä¸ªå¼ºå¤§è€Œä¼˜é›…çš„Python Webæ¡†æ¶ï¼Œå®ƒç»“åˆäº†ç°ä»£Pythonç‰¹æ€§ï¼Œæä¾›äº†å‡ºè‰²çš„å¼€å‘ä½“éªŒï¼š

- **å¼€å‘é€Ÿåº¦å¿«**ï¼šç›´è§‚çš„APIè®¾è®¡å’Œå‡ºè‰²çš„æ–‡æ¡£
- **æ‰§è¡Œé€Ÿåº¦å¿«**ï¼šåŸºäºStarletteå’ŒPydanticçš„é«˜æ€§èƒ½å®ç°
- **é”™è¯¯å‡å°‘**ï¼šå¼ºç±»å‹ç³»ç»Ÿå’Œè‡ªåŠ¨æ•°æ®éªŒè¯
- **æ˜“äºç»´æŠ¤**ï¼šæ¸…æ™°çš„ä»£ç ç»“æ„å’Œä¾èµ–æ³¨å…¥ç³»ç»Ÿ

æ— è®ºä½ æ˜¯æ„å»ºç®€å•çš„å¾®æœåŠ¡ï¼Œè¿˜æ˜¯å¤æ‚çš„APIåç«¯ï¼ŒFastAPIéƒ½èƒ½å¸®åŠ©ä½ é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚

## å­¦ä¹ èµ„æº

- [FastAPIå®˜æ–¹æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [FastAPI GitHubä»“åº“](https://github.com/tiangolo/fastapi)
- [Starletteæ–‡æ¡£](https://www.starlette.io/)
- [Pydanticæ–‡æ¡£](https://pydantic-docs.helpmanual.io/)

å¼€å§‹ä½¿ç”¨FastAPIï¼Œäº«å—Python Webå¼€å‘çš„ä¹è¶£å§ï¼ 